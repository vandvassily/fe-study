<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.27">
    <link rel="icon" href="/favicon.ico"><title>作用域链 | fe-study</title><meta name="description" content="前端知识笔记">
    <link rel="modulepreload" href="/fe-study/assets/app.9bc35547.js"><link rel="modulepreload" href="/fe-study/assets/作用域链.html.b12ff8f2.js"><link rel="modulepreload" href="/fe-study/assets/plugin-vue_export-helper.5a098b48.js"><link rel="modulepreload" href="/fe-study/assets/作用域链.html.2a0560b6.js">
    <link rel="stylesheet" href="/fe-study/assets/style.2c625487.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/fe-study/" class=""><!----><span class="site-name can-hide">fe-study</span></a></span><div class="navbar-links-wrapper" style=""><!--[--><!--]--><nav class="navbar-links can-hide"><!--[--><div class="navbar-links-item"><a href="/fe-study/" class="nav-link" aria-label="Home"><!--[--><!--]--> Home <!--[--><!--]--></a></div><div class="navbar-links-item"><a class="nav-link external" href="http://vandvassily.cn/" rel="noopener noreferrer" target="_blank" aria-label="Blog"><!--[--><!--]--> Blog <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/vandvassily/fe-study" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-links"><!--[--><div class="navbar-links-item"><a href="/fe-study/" class="nav-link" aria-label="Home"><!--[--><!--]--> Home <!--[--><!--]--></a></div><div class="navbar-links-item"><a class="nav-link external" href="http://vandvassily.cn/" rel="noopener noreferrer" target="_blank" aria-label="Blog"><!--[--><!--]--> Blog <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/vandvassily/fe-study" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-links"><!--[--><!--[--><a href="/fe-study/javascript/" class="nav-link router-link-active sidebar-heading sidebar-item active" aria-label="JS知识"><!--[--><!--]--> JS知识 <!--[--><!--]--></a><ul class=""><li><!--[--><a href="/fe-study/javascript/basic/%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B.html" class="nav-link sidebar-item" aria-label="数据类型"><!--[--><!--]--> 数据类型 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/fe-study/javascript/basic/%E5%8E%9F%E5%9E%8B.html" class="nav-link sidebar-item" aria-label="原型、原型链、继承"><!--[--><!--]--> 原型、原型链、继承 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/fe-study/javascript/basic/%E8%AF%8D%E6%B3%95%E4%BD%9C%E7%94%A8%E5%9F%9F.html" class="nav-link sidebar-item" aria-label="词法作用域"><!--[--><!--]--> 词法作用域 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/fe-study/javascript/basic/%E6%89%A7%E8%A1%8C%E4%B8%8A%E4%B8%8B%E6%96%87.html" class="nav-link sidebar-item" aria-label="执行上下文"><!--[--><!--]--> 执行上下文 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/fe-study/javascript/basic/%E6%89%A7%E8%A1%8C%E4%B8%8A%E4%B8%8B%E6%96%87%E6%A0%88.html" class="nav-link sidebar-item" aria-label="JavaScript深入之执行上下文栈"><!--[--><!--]--> JavaScript深入之执行上下文栈 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/fe-study/javascript/basic/%E4%BD%9C%E7%94%A8%E5%9F%9F%E9%93%BE.html" class="router-link-active router-link-exact-active nav-link router-link-active sidebar-item active" aria-label="作用域链"><!--[--><!--]--> 作用域链 <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/fe-study/javascript/basic/%E4%BD%9C%E7%94%A8%E5%9F%9F%E9%93%BE.html#前言" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="前言"><!--[--><!--]--> 前言 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/fe-study/javascript/basic/%E4%BD%9C%E7%94%A8%E5%9F%9F%E9%93%BE.html#作用域链-1" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="作用域链"><!--[--><!--]--> 作用域链 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/fe-study/javascript/basic/%E4%BD%9C%E7%94%A8%E5%9F%9F%E9%93%BE.html#函数创建" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="函数创建"><!--[--><!--]--> 函数创建 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/fe-study/javascript/basic/%E4%BD%9C%E7%94%A8%E5%9F%9F%E9%93%BE.html#函数激活" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="函数激活"><!--[--><!--]--> 函数激活 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/fe-study/javascript/basic/%E4%BD%9C%E7%94%A8%E5%9F%9F%E9%93%BE.html#捋一捋" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="捋一捋"><!--[--><!--]--> 捋一捋 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/fe-study/javascript/basic/%E4%BD%9C%E7%94%A8%E5%9F%9F%E9%93%BE.html#文章内容来源" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="文章内容来源"><!--[--><!--]--> 文章内容来源 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a href="/fe-study/javascript/basic/this.html" class="nav-link sidebar-item" aria-label="this"><!--[--><!--]--> this <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/fe-study/javascript/basic/new.html" class="nav-link sidebar-item" aria-label="new 的原理"><!--[--><!--]--> new 的原理 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/fe-study/javascript/basic/call%20apply%20bind.html" class="nav-link sidebar-item" aria-label="call apply bind"><!--[--><!--]--> call apply bind <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/fe-study/javascript/basic/EventLoop.html" class="nav-link sidebar-item" aria-label="EventLoop 事件循环"><!--[--><!--]--> EventLoop 事件循环 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/fe-study/javascript/basic/array.html" class="nav-link sidebar-item" aria-label="数组方法"><!--[--><!--]--> 数组方法 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/fe-study/javascript/basic/currying.html" class="nav-link sidebar-item" aria-label="函数柯里化"><!--[--><!--]--> 函数柯里化 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/fe-study/javascript/basic/%E6%B7%B1%E6%8B%B7%E8%B4%9D.html" class="nav-link sidebar-item" aria-label="深拷贝"><!--[--><!--]--> 深拷贝 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/fe-study/javascript/usage/debounce-throttle.html" class="nav-link sidebar-item" aria-label="防抖 与 节流"><!--[--><!--]--> 防抖 与 节流 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><a href="/fe-study/browser/" class="nav-link sidebar-heading sidebar-item" aria-label="浏览器"><!--[--><!--]--> 浏览器 <!--[--><!--]--></a><ul class=""><li><!--[--><a href="/fe-study/browser/%E8%BE%93%E5%85%A5URL.html" class="nav-link sidebar-item" aria-label="输入URL后，发生了什么"><!--[--><!--]--> 输入URL后，发生了什么 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><a href="/fe-study/vue/" class="nav-link sidebar-heading sidebar-item" aria-label="Vue"><!--[--><!--]--> Vue <!--[--><!--]--></a><ul class=""><li><!--[--><a href="/fe-study/vue/lifeCircle.html" class="nav-link sidebar-item" aria-label="Vue生命周期"><!--[--><!--]--> Vue生命周期 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/fe-study/vue/%E5%93%8D%E5%BA%94%E5%BC%8F%E5%8E%9F%E7%90%86.html" class="nav-link sidebar-item" aria-label="响应式原理"><!--[--><!--]--> 响应式原理 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/fe-study/vue/nextTick.html" class="nav-link sidebar-item" aria-label="异步更新队列"><!--[--><!--]--> 异步更新队列 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/fe-study/vue/watcher.html" class="nav-link sidebar-item" aria-label="computed 和 watch 的原理"><!--[--><!--]--> computed 和 watch 的原理 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/fe-study/vue/diff.html" class="nav-link sidebar-item" aria-label="Diff算法"><!--[--><!--]--> Diff算法 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/fe-study/vue/keep-alive.html" class="nav-link sidebar-item" aria-label="keep-alive 组件"><!--[--><!--]--> keep-alive 组件 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/fe-study/vue/Vue3.html" class="nav-link sidebar-item" aria-label="Vue3"><!--[--><!--]--> Vue3 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><a href="/fe-study/react/" class="nav-link sidebar-heading sidebar-item" aria-label="React"><!--[--><!--]--> React <!--[--><!--]--></a><ul class=""><li><!--[--><a href="/fe-study/react/React%E6%9E%B6%E6%9E%84.html" class="nav-link sidebar-item" aria-label="React 架构"><!--[--><!--]--> React 架构 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/fe-study/react/jsx.html" class="nav-link sidebar-item" aria-label="JSX是什么？"><!--[--><!--]--> JSX是什么？ <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/fe-study/react/lifecircle.html" class="nav-link sidebar-item" aria-label="React的生命周期"><!--[--><!--]--> React的生命周期 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/fe-study/react/React%20Hooks.html" class="nav-link sidebar-item" aria-label="React Hooks"><!--[--><!--]--> React Hooks <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/fe-study/react/react%20performance.html" class="nav-link sidebar-item" aria-label="React 性能优化"><!--[--><!--]--> React 性能优化 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/fe-study/react/setState.html" class="nav-link sidebar-item" aria-label="setState 知识点"><!--[--><!--]--> setState 知识点 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/fe-study/react/React%20Events.html" class="nav-link sidebar-item" aria-label="React事件机制"><!--[--><!--]--> React事件机制 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/fe-study/react/React%20%E7%8A%B6%E6%80%81%E6%9B%B4%E6%96%B0.html" class="nav-link sidebar-item" aria-label="React状态更新"><!--[--><!--]--> React状态更新 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/fe-study/react/React%20Scheduler.html" class="nav-link sidebar-item" aria-label="React Scheduler 调度器和优先级"><!--[--><!--]--> React Scheduler 调度器和优先级 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/fe-study/react/React%E9%9D%A2%E8%AF%95%E9%A2%98.html" class="nav-link sidebar-item" aria-label="React 面试题"><!--[--><!--]--> React 面试题 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/fe-study/react/React%E6%BA%90%E7%A0%81.html" class="nav-link sidebar-item" aria-label="React源码"><!--[--><!--]--> React源码 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><a href="/fe-study/typescript/" class="nav-link sidebar-heading sidebar-item" aria-label="Typescript"><!--[--><!--]--> Typescript <!--[--><!--]--></a><ul class=""><li><!--[--><a href="/fe-study/typescript/typescript%E9%85%8D%E7%BD%AE.html" class="nav-link sidebar-item" aria-label="typescript配置详解"><!--[--><!--]--> typescript配置详解 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><a href="/fe-study/network/" class="nav-link sidebar-heading sidebar-item" aria-label="网络"><!--[--><!--]--> 网络 <!--[--><!--]--></a><ul class=""><li><!--[--><a href="/fe-study/network/tcp.html" class="nav-link sidebar-item" aria-label="TCP"><!--[--><!--]--> TCP <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/fe-study/network/https.html" class="nav-link sidebar-item" aria-label="Https"><!--[--><!--]--> Https <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/fe-study/network/security.html" class="nav-link sidebar-item" aria-label="web安全"><!--[--><!--]--> web安全 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><a href="/fe-study/nodejs/" class="nav-link sidebar-heading sidebar-item" aria-label="NodeJs"><!--[--><!--]--> NodeJs <!--[--><!--]--></a><ul class=""><li><!--[--><a href="/fe-study/nodejs/tools.html" class="nav-link sidebar-item" aria-label="Node 常用工具和指令"><!--[--><!--]--> Node 常用工具和指令 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><a href="/fe-study/structure-and-algorithm/" class="nav-link sidebar-heading sidebar-item" aria-label="数据结构与算法"><!--[--><!--]--> 数据结构与算法 <!--[--><!--]--></a><ul class=""><li><!--[--><a href="/fe-study/structure-and-algorithm/%E5%A4%8D%E6%9D%82%E5%BA%A6%E5%88%86%E6%9E%90-%E4%B8%8A.html" class="nav-link sidebar-item" aria-label="时间复杂度"><!--[--><!--]--> 时间复杂度 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/fe-study/structure-and-algorithm/%E5%A4%8D%E6%9D%82%E5%BA%A6%E5%88%86%E6%9E%90-%E4%B8%8B.html" class="nav-link sidebar-item" aria-label="复杂度分析"><!--[--><!--]--> 复杂度分析 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/fe-study/structure-and-algorithm/%E6%95%B0%E7%BB%84.html" class="nav-link sidebar-item" aria-label="数组"><!--[--><!--]--> 数组 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/fe-study/structure-and-algorithm/%E9%93%BE%E8%A1%A8.html" class="nav-link sidebar-item" aria-label="链表"><!--[--><!--]--> 链表 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/fe-study/structure-and-algorithm/%E6%8E%92%E5%BA%8F.html" class="nav-link sidebar-item" aria-label="排序"><!--[--><!--]--> 排序 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/fe-study/structure-and-algorithm/%E4%BA%8C%E5%8F%89%E6%A0%91%E7%9A%84%E9%81%8D%E5%8E%86.html" class="nav-link sidebar-item" aria-label="二叉树的遍历"><!--[--><!--]--> 二叉树的遍历 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/fe-study/structure-and-algorithm/%E5%9B%9E%E6%BA%AF%E7%AE%97%E6%B3%95.html" class="nav-link sidebar-item" aria-label="回溯算法"><!--[--><!--]--> 回溯算法 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/fe-study/structure-and-algorithm/%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%8C%B9%E9%85%8D.html" class="nav-link sidebar-item" aria-label="字符串匹配"><!--[--><!--]--> 字符串匹配 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/fe-study/structure-and-algorithm/dynamic-programming.html" class="nav-link sidebar-item" aria-label="动态规划"><!--[--><!--]--> 动态规划 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><a href="/fe-study/performance/" class="nav-link sidebar-heading sidebar-item" aria-label="性能优化"><!--[--><!--]--> 性能优化 <!--[--><!--]--></a><!----><!--]--><!--[--><a href="/fe-study/front-end-engineering/what-is-Frond-End-Engineering" class="nav-link sidebar-heading sidebar-item" aria-label="前端工程化"><!--[--><!--]--> 前端工程化 <!--[--><!--]--></a><ul class=""><li><!--[--><a href="/fe-study/front-end-engineering/what-is-Frond-End-Engineering.html" class="nav-link sidebar-item" aria-label="什么是前端工程化？"><!--[--><!--]--> 什么是前端工程化？ <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/fe-study/front-end-engineering/npm%20link.html" class="nav-link sidebar-item" aria-label="npm link"><!--[--><!--]--> npm link <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/fe-study/front-end-engineering/babel.html" class="nav-link sidebar-item" aria-label="Babel"><!--[--><!--]--> Babel <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/fe-study/front-end-engineering/jenkins.html" class="nav-link sidebar-item" aria-label="Jenkins配置"><!--[--><!--]--> Jenkins配置 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/fe-study/front-end-engineering/rollup.html" class="nav-link sidebar-item" aria-label="RollUp"><!--[--><!--]--> RollUp <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/fe-study/front-end-engineering/lerna.html" class="nav-link sidebar-item" aria-label="基于 Lerna 管理 monorepo 项目"><!--[--><!--]--> 基于 Lerna 管理 monorepo 项目 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/fe-study/front-end-engineering/vue2%E6%94%B9%E9%80%A0%E4%B8%BAvite%E6%9E%84%E5%BB%BA.html" class="nav-link sidebar-item" aria-label="vue2项目进行vite改造"><!--[--><!--]--> vue2项目进行vite改造 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/fe-study/front-end-engineering/vconsole.html" class="nav-link sidebar-item" aria-label="vconsole不同环境打包引入"><!--[--><!--]--> vconsole不同环境打包引入 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><a href="/fe-study/programming-design/" class="nav-link sidebar-heading sidebar-item" aria-label="程序设计和场景分析"><!--[--><!--]--> 程序设计和场景分析 <!--[--><!--]--></a><ul class=""><li><!--[--><a href="/fe-study/programming-design/how-to-make-a-game.html" class="nav-link sidebar-item" aria-label="如何制作一个游戏？"><!--[--><!--]--> 如何制作一个游戏？ <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/fe-study/programming-design/how-to-design-a-component-lib.html" class="nav-link sidebar-item" aria-label="如何设计一个组件库"><!--[--><!--]--> 如何设计一个组件库 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/fe-study/programming-design/how-to-design-a-web-monitor-system.html" class="nav-link sidebar-item" aria-label="如何设计一个前端监控系统"><!--[--><!--]--> 如何设计一个前端监控系统 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><a href="/fe-study/other/" class="nav-link sidebar-heading sidebar-item" aria-label="其他"><!--[--><!--]--> 其他 <!--[--><!--]--></a><ul class=""><li><!--[--><a href="/fe-study/other/indexedDB.html" class="nav-link sidebar-item" aria-label="indexedDB 浏览器数据库"><!--[--><!--]--> indexedDB 浏览器数据库 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/fe-study/other/vuePress.html" class="nav-link sidebar-item" aria-label="vuePress 使用"><!--[--><!--]--> vuePress 使用 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/fe-study/other/nginx.html" class="nav-link sidebar-item" aria-label="Nginx概念与使用"><!--[--><!--]--> Nginx概念与使用 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/fe-study/other/sentry.html" class="nav-link sidebar-item" aria-label="Sentry"><!--[--><!--]--> Sentry <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--[--><a href="/fe-study/awesome/" class="nav-link sidebar-heading sidebar-item" aria-label="收藏的文章"><!--[--><!--]--> 收藏的文章 <!--[--><!--]--></a><ul class=""><li><!--[--><a href="/fe-study/awesome/React.html" class="nav-link sidebar-item" aria-label="React"><!--[--><!--]--> React <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/fe-study/awesome/Typescript.html" class="nav-link sidebar-item" aria-label="Typescript"><!--[--><!--]--> Typescript <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/fe-study/awesome/Taro.html" class="nav-link sidebar-item" aria-label="Taro"><!--[--><!--]--> Taro <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/fe-study/awesome/concepts.html" class="nav-link sidebar-item" aria-label="前端新概念和趋势"><!--[--><!--]--> 前端新概念和趋势 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/fe-study/awesome/tools.html" class="nav-link sidebar-item" aria-label="提效工具和网站"><!--[--><!--]--> 提效工具和网站 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/fe-study/awesome/network.html" class="nav-link sidebar-item" aria-label="网络"><!--[--><!--]--> 网络 <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a href="/fe-study/awesome/other.html" class="nav-link sidebar-item" aria-label="其他"><!--[--><!--]--> 其他 <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="作用域链" tabindex="-1"><a class="header-anchor" href="#作用域链" aria-hidden="true">#</a> 作用域链</h1><p>本文摘自 <a href="https://github.com/mqyqingfeng/Blog/issues/6" target="_blank" rel="noopener noreferrer">[JavaScript深入之作用域链] --- 冴羽的博客<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></p><h2 id="前言" tabindex="-1"><a class="header-anchor" href="#前言" aria-hidden="true">#</a> 前言</h2><p>在《JavaScript深入之执行上下文栈》中讲到，当JavaScript代码执行一段可执行代码(executable code)时，会创建对应的执行上下文(execution context)。</p><p>对于每个执行上下文，都有三个重要属性：</p><ul><li>变量对象(Variable object，VO)</li><li>作用域链(Scope chain)</li><li>this</li></ul><p>今天重点讲讲作用域链。</p><h2 id="作用域链-1" tabindex="-1"><a class="header-anchor" href="#作用域链-1" aria-hidden="true">#</a> 作用域链</h2><p>在《JavaScript深入之变量对象》中讲到，当查找变量的时候，会先从当前上下文的变量对象中查找，如果没有找到，就会从父级(词法层面上的父级)执行上下文的变量对象中查找，一直找到全局上下文的变量对象，也就是全局对象。这样由多个执行上下文的变量对象构成的链表就叫做作用域链。</p><p>下面，让我们以一个函数的创建和激活两个时期来讲解作用域链是如何创建和变化的。</p><h2 id="函数创建" tabindex="-1"><a class="header-anchor" href="#函数创建" aria-hidden="true">#</a> 函数创建</h2><p>在《JavaScript深入之词法作用域和动态作用域》中讲到，函数的作用域在函数定义的时候就决定了。</p><p>这是因为函数有一个内部属性 [[scope]]，当函数创建的时候，就会保存所有父变量对象到其中，你可以理解 [[scope]] 就是所有父变量对象的层级链，但是注意：[[scope]] 并不代表完整的作用域链！</p><p>举个例子：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">function</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token operator">...</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>函数创建时，各自的[[scope]]为：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>foo<span class="token punctuation">.</span><span class="token punctuation">[</span><span class="token punctuation">[</span>scope<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
  globalContext<span class="token punctuation">.</span><span class="token constant">VO</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

bar<span class="token punctuation">.</span><span class="token punctuation">[</span><span class="token punctuation">[</span>scope<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
    fooContext<span class="token punctuation">.</span><span class="token constant">AO</span><span class="token punctuation">,</span>
    globalContext<span class="token punctuation">.</span><span class="token constant">VO</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="函数激活" tabindex="-1"><a class="header-anchor" href="#函数激活" aria-hidden="true">#</a> 函数激活</h2><p>当函数激活时，进入函数上下文，创建 VO/AO 后，就会将活动对象添加到作用链的前端。</p><p>这时候执行上下文的作用域链，我们命名为 Scope：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>Scope <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token constant">AO</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span>Scope<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>至此，作用域链创建完毕。</p><h2 id="捋一捋" tabindex="-1"><a class="header-anchor" href="#捋一捋" aria-hidden="true">#</a> 捋一捋</h2><p>以下面的例子为例，结合着之前讲的变量对象和执行上下文栈，我们来总结一下函数执行上下文中作用域链和变量对象的创建过程：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> scope <span class="token operator">=</span> <span class="token string">&quot;global scope&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">checkscope</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> scope2 <span class="token operator">=</span> <span class="token string">&#39;local scope&#39;</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> scope2<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">checkscope</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>执行过程如下：</p><p>1.checkscope 函数被创建，保存作用域链到 内部属性[[scope]]</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>checkscope<span class="token punctuation">.</span><span class="token punctuation">[</span><span class="token punctuation">[</span>scope<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
    globalContext<span class="token punctuation">.</span><span class="token constant">VO</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>2.执行 checkscope 函数，创建 checkscope 函数执行上下文，checkscope 函数执行上下文被压入执行上下文栈</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>ECStack <span class="token operator">=</span> <span class="token punctuation">[</span>
    checkscopeContext<span class="token punctuation">,</span>
    globalContext
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>3.checkscope 函数并不立刻执行，开始做准备工作，第一步：复制函数[[scope]]属性创建作用域链</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>checkscopeContext <span class="token operator">=</span> <span class="token punctuation">{</span>
    Scope<span class="token operator">:</span> checkscope<span class="token punctuation">.</span><span class="token punctuation">[</span><span class="token punctuation">[</span>scope<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>4.第二步：用 arguments 创建活动对象，随后初始化活动对象，加入形参、函数声明、变量声明</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>checkscopeContext <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token constant">AO</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        arguments<span class="token operator">:</span> <span class="token punctuation">{</span>
            length<span class="token operator">:</span> <span class="token number">0</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        scope2<span class="token operator">:</span> <span class="token keyword">undefined</span>
    <span class="token punctuation">}</span>，
    Scope<span class="token operator">:</span> checkscope<span class="token punctuation">.</span><span class="token punctuation">[</span><span class="token punctuation">[</span>scope<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>5.第三步：将活动对象压入 checkscope 作用域链顶端</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>checkscopeContext <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token constant">AO</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        arguments<span class="token operator">:</span> <span class="token punctuation">{</span>
            length<span class="token operator">:</span> <span class="token number">0</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        scope2<span class="token operator">:</span> <span class="token keyword">undefined</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    Scope<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token constant">AO</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>Scope<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>6.准备工作做完，开始执行函数，随着函数的执行，修改 AO 的属性值</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>checkscopeContext <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token constant">AO</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        arguments<span class="token operator">:</span> <span class="token punctuation">{</span>
            length<span class="token operator">:</span> <span class="token number">0</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        scope2<span class="token operator">:</span> <span class="token string">&#39;local scope&#39;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    Scope<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token constant">AO</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>Scope<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>7.查找到 scope2 的值，返回后函数执行完毕，函数上下文从执行上下文栈中弹出</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>ECStack <span class="token operator">=</span> <span class="token punctuation">[</span>
    globalContext
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="文章内容来源" tabindex="-1"><a class="header-anchor" href="#文章内容来源" aria-hidden="true">#</a> 文章内容来源</h2><p><a href="https://github.com/mqyqingfeng/Blog/issues/6" target="_blank" rel="noopener noreferrer">[JavaScript深入之作用域链] --- 冴羽的博客<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></p><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><span class="meta-item-info">9/12/2022, 5:33:14 AM</span></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: zhs25427199@gmail.com">vandvassily</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><span class="prev"> ← <a href="/fe-study/javascript/basic/%E6%89%A7%E8%A1%8C%E4%B8%8A%E4%B8%8B%E6%96%87%E6%A0%88.html" class="nav-link" aria-label="JavaScript深入之执行上下文栈"><!--[--><!--]--> JavaScript深入之执行上下文栈 <!--[--><!--]--></a></span><span class="next"><a href="/fe-study/javascript/basic/this.html" class="nav-link" aria-label="this"><!--[--><!--]--> this <!--[--><!--]--></a> → </span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/fe-study/assets/app.9bc35547.js" defer></script>
  </body>
</html>
