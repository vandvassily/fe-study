import{r,c as p,a as n,d as e,F as o,b as a,e as t,o as l}from"./app.9bc35547.js";import{_ as c}from"./plugin-vue_export-helper.5a098b48.js";const i={},u=n("h1",{id:"\u57FA\u4E8E-lerna-\u7BA1\u7406-monorepo-\u9879\u76EE",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u57FA\u4E8E-lerna-\u7BA1\u7406-monorepo-\u9879\u76EE","aria-hidden":"true"},"#"),a(" \u57FA\u4E8E Lerna \u7BA1\u7406 monorepo \u9879\u76EE")],-1),d=a("demo\u4F20\u9001\u95E8: "),b={href:"https://github.com/vandvassily/lerna-example",target:"_blank",rel:"noopener noreferrer"},h=a("lerna-example"),m=t(`<h2 id="monorepo-\u4E0E-multirepo" tabindex="-1"><a class="header-anchor" href="#monorepo-\u4E0E-multirepo" aria-hidden="true">#</a> monorepo \u4E0E multirepo</h2><p>Monorepo \u7684\u5168\u79F0\u662F monolithic repository\uFF0C\u5373\u5355\u4F53\u5F0F\u4ED3\u5E93\uFF0C\u4E0E\u4E4B\u5BF9\u5E94\u7684\u662F Multirepo(multiple repository)\uFF0C\u8FD9\u91CC\u7684\u201C\u5355\u201D\u548C\u201C\u591A\u201D\u662F\u6307\u6BCF\u4E2A\u4ED3\u5E93\u4E2D\u6240\u7BA1\u7406\u7684\u6A21\u5757\u6570\u91CF\u3002</p><p>Monorepo \u662F\u628A\u6240\u6709\u76F8\u5173\u7684 package \u90FD\u653E\u5728\u4E00\u4E2A\u4ED3\u5E93\u91CC\u8FDB\u884C\u7BA1\u7406\uFF0C\u6BCF\u4E2A package \u72EC\u7ACB\u53D1\u5E03\u3002\u4F8B\u5982\uFF1AReact, Angular, Babel, Jest, Umijs, Vue ...</p><p>Multirepo \u662F\u6BD4\u8F83\u4F20\u7EDF\u7684\u505A\u6CD5\uFF0C\u5373\u6BCF\u4E00\u4E2A package \u90FD\u5355\u72EC\u7528\u4E00\u4E2A\u4ED3\u5E93\u6765\u8FDB\u884C\u7BA1\u7406\u3002\u4F8B\u5982\uFF1ARollup, ...</p><h2 id="lerna" tabindex="-1"><a class="header-anchor" href="#lerna" aria-hidden="true">#</a> Lerna</h2><p>Lerna \u662F\u4E00\u4E2A\u7BA1\u7406\u591A\u4E2A npm \u6A21\u5757\u7684\u5DE5\u5177\uFF0C\u662F Babel \u81EA\u5DF1\u7528\u6765\u7EF4\u62A4\u81EA\u5DF1\u7684 Monorepo \u5E76\u5F00\u6E90\u51FA\u7684\u4E00\u4E2A\u9879\u76EE\u3002\u4F18\u5316\u7EF4\u62A4\u591A\u5305\u7684\u5DE5\u4F5C\u6D41\uFF0C\u89E3\u51B3\u591A\u4E2A\u5305\u4E92\u76F8\u4F9D\u8D56\uFF0C\u4E14\u53D1\u5E03\u9700\u8981\u624B\u52A8\u7EF4\u62A4\u591A\u4E2A\u5305\u7684\u95EE\u9898\u3002</p><p>Lerna \u4F7F\u7528 git \u548C npm \u7BA1\u7406\u591A\u8F6F\u4EF6\u5305\u4EE3\u7801\u4ED3\u5E93\u7684\u5DE5\u4F5C\u6D41\u7A0B\u8FDB\u884C\u4F18\u5316\u3002</p><h3 id="\u5B89\u88C5" tabindex="-1"><a class="header-anchor" href="#\u5B89\u88C5" aria-hidden="true">#</a> \u5B89\u88C5</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">npm</span> i -g lerna
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h3 id="\u521D\u59CB\u5316lerna\u9879\u76EE" tabindex="-1"><a class="header-anchor" href="#\u521D\u59CB\u5316lerna\u9879\u76EE" aria-hidden="true">#</a> \u521D\u59CB\u5316lerna\u9879\u76EE</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># --independent \u72EC\u7ACB\u7248\u672C\u53F7</span>
$ lerna init --independent
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="\u66F4\u6539\u4E3A-yarn-worksapces" tabindex="-1"><a class="header-anchor" href="#\u66F4\u6539\u4E3A-yarn-worksapces" aria-hidden="true">#</a> \u66F4\u6539\u4E3A yarn worksapces</h3><p>\u76EE\u7684\u662F\u5C06\u6240\u6709\u5B50\u5305\u7684 <code>node_modules</code> \u7EDF\u4E00\u63D0\u5347\u5230 lerna \u9879\u76EE\u6839\u76EE\u5F55\u4E0B</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token comment">// ./lerna.json</span>
<span class="token punctuation">{</span>
  ...
  <span class="token property">&quot;npmClient&quot;</span><span class="token operator">:</span> <span class="token string">&quot;yarn&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;useWorkspaces&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token comment">// ./package.json</span>
<span class="token punctuation">{</span>
  <span class="token property">&quot;private&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  ...
  <span class="token property">&quot;workspaces&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;packages/*&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="\u521B\u5EFApackage" tabindex="-1"><a class="header-anchor" href="#\u521B\u5EFApackage" aria-hidden="true">#</a> \u521B\u5EFApackage</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>$ lerna create package-A
$ lerna create package-B
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="\u6DFB\u52A0\u4F9D\u8D56" tabindex="-1"><a class="header-anchor" href="#\u6DFB\u52A0\u4F9D\u8D56" aria-hidden="true">#</a> \u6DFB\u52A0\u4F9D\u8D56</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># package-B \u4F9D\u8D56\u4E8E package-A</span>
$ lerna <span class="token function">add</span> package-A --scope<span class="token operator">=</span>package-B
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="\u5B89\u88C5\u5305" tabindex="-1"><a class="header-anchor" href="#\u5B89\u88C5\u5305" aria-hidden="true">#</a> \u5B89\u88C5\u5305</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># \u6839\u76EE\u5F55\u4E0B</span>
$ <span class="token function">yarn</span> <span class="token function">install</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="\u542F\u52A8\u9879\u76EE" tabindex="-1"><a class="header-anchor" href="#\u542F\u52A8\u9879\u76EE" aria-hidden="true">#</a> \u542F\u52A8\u9879\u76EE</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># \u547D\u4EE4\u53EF\u4EE5\u5199\u5728\u6839\u76EE\u5F55\u4E0B package.json \u4E2D\u7684 scripts \u4E2D</span>
$ <span class="token function">yarn</span> workspace module-A dev
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="\u667A\u80FD\u63D0\u793A" tabindex="-1"><a class="header-anchor" href="#\u667A\u80FD\u63D0\u793A" aria-hidden="true">#</a> \u667A\u80FD\u63D0\u793A</h3><p>\u65B9\u4FBF\u7F16\u8F91\u5668\u81EA\u52A8\u67E5\u627E\u5F15\u7528\u7684\u4F9D\u8D56</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token comment">// jsconfig.json</span>
<span class="token punctuation">{</span> 
  <span class="token property">&quot;compilerOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    ...
    <span class="token property">&quot;paths&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;@vassily/h5-utils&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;./packages/h5-utils&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="\u53C2\u8003" tabindex="-1"><a class="header-anchor" href="#\u53C2\u8003" aria-hidden="true">#</a> \u53C2\u8003</h2>`,27),k={href:"https://blog.csdn.net/qiwoo_weekly/article/details/115364654",target:"_blank",rel:"noopener noreferrer"},g=a("\u73B0\u4EE3\u524D\u7AEF\u5DE5\u7A0B\u5316-\u57FA\u4E8E Monorepo \u7684 lerna"),v={href:"https://blog.csdn.net/xgangzai/article/details/119524117",target:"_blank",rel:"noopener noreferrer"},_=a("\u6BCF\u4E2A\u524D\u7AEF\u90FD\u503C\u5F97\u62E5\u6709\u81EA\u5DF1\u7684\u7EC4\u4EF6\u5E93\uFF0C\u5C31\u50CF\u6BCF\u4E2A\u590F\u5929\u90FD\u62E5\u6709\u897F\u74DC"),f={href:"https://youngjuning.js.org/#/blog/others/%E5%9F%BA%E4%BA%8E%20lerna%20%E7%9A%84%E5%A4%9A%E5%8C%85%20java-script%20%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA",target:"_blank",rel:"noopener noreferrer"},x=a("\u57FA\u4E8E lerna \u7684\u591A\u5305 JavaScript \u9879\u76EE\u642D\u5EFA\u7EF4\u62A4\u7B14\u8BB0"),j={href:"https://juejin.cn/post/6844903911095025678",target:"_blank",rel:"noopener noreferrer"},q=a("\u57FA\u4E8E Lerna \u7BA1\u7406 packages \u7684 Monorepo \u9879\u76EE\u6700\u4F73\u5B9E\u8DF5");function y(B,A){const s=r("OutboundLink");return l(),p(o,null,[u,n("p",null,[d,n("a",b,[h,e(s)])]),m,n("p",null,[n("a",k,[g,e(s)])]),n("p",null,[n("a",v,[_,e(s)])]),n("p",null,[n("a",f,[x,e(s)])]),n("p",null,[n("a",j,[q,e(s)])])],64)}var L=c(i,[["render",y]]);export{L as default};
